{% for group, vehicle_count in group_and_vehicle_count %}
    <tr>
        <td>
            <!-- Contenido de la vista para usuarios con permiso a editar o eliminar-->
            {% if perms.realtime.change_vehiclegroup %}
                <button type="button" hx-get="{% url 'realtime:update_group_vehicle' group.id %}" class="btn btn-primary" hx-target="#dialog"><i class="fa-solid fa-pencil"></i></button>
            {% endif %}
            {% if perms.realtime.delete_vehiclegroup %}
                <button type="button" hx-get="{% url 'realtime:delete_group_vehicle' group.id %}" class="btn btn-danger" hx-target="#dialog"><i class="fa-solid fa-trash"></i></button>
            {% endif %}
        </td>
        <td class="align-middle text-center text-sm">
            <span class="text-xs font-weight-normal mb-0" value="group.id"> {{ group.name }} </span>
        </td>
        <td class="align-middle text-center text-sm">
            <span class="text-xs font-weight-normal mb-0"> {{ vehicle_count }}</span>
        </td>
    </tr>
{% endfor %} {% block scripts %}

<script>
    const input = document.getElementById("search-input");

    input.addEventListener("keyup", (e) => {
      const value = e.target.value.toLowerCase();
      // Obtener todas las filas de la tabla
      const rows = document.querySelector("tbody").querySelectorAll("tr");

      rows.forEach((row) => {
        // Obtener el texto de todas las celdas en la fila
        const cellTexts = Array.from(row.querySelectorAll("td")).map(cell => cell.textContent.toLowerCase());

        // Si alguna de las celdas contiene el valor buscado, mostrar la fila
        if (cellTexts.some(text => text.includes(value))) {
          row.hidden = false;
        } else {
          row.hidden = true;
        }
      });
    });
  </script>
{% endblock scripts %}
