{% extends "layouts/base.html" %}
{% load i18n static %}

{% block title %} {% trans "Report configuration" %}{% endblock %}

{% block content %}

<div class="container-fluid py-4">
    <div class="row">
        <div class="col-12">
            <div class="card my-4">
                <div class="card-header p-0 position-relative mt-n4 mx-3 z-index-2">
                    <div class="bg-gradient-primary shadow-primary border-radius-lg pt-4 pb-3">
                        <div class="col">
                            <h5 class="text-white text-capitalize ps-3"> {% trans "Report configuration" %} </h5>
                        </div>
                    </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col">
                            <h6>{% trans "Company" %}<span style="color: red"> *</span></h6>
                            <input id="search-company" type="text" class="form-control mb-2" placeholder={% trans "Search" %} autocomplete="off">
                            <select id="companySelect" name="company" class="input-group input-group-static mb-4" style="width: 200px;">
                                <option value="">-----------</option>
                                {% if companies %}
                                    {% for company in companies %}
                                        <option value="{{ company.id }}">{{ company.company_name }}</option>
                                    {% endfor %}
                                {% endif %}
                            </select>
                        </div>
                        <!-- Columna para Widgets -->
                        <div class="col">
                            <h6>{% trans "Widgets" %}</h6>
                            <div id="widgetsContainer" class="scrollable-container" style="max-height: 200px; overflow-y: auto;">
                                {% if widgets %}
                                    {% for widget_label in widgets %}
                                    <div class="item">{{ widget_label }}</div>
                                    {% endfor %}
                                {% endif %}
                            </div>
                        </div>
                        <!-- Columna para Reports -->
                        <div class="col">
                            <h6>{% trans "Reports" %}</h6>
                            <div id="reportsContainer" class="scrollable-container" style="max-height: 200px; overflow-y: auto;">
                                {% if reports %}
                                    {% for report_label in reports %}
                                    <div class="item">{{ report_label }}</div>
                                    {% endfor %}
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    {% if perms.realtime.add_io_items_report %}
                    <div class="mt-3"> <!-- Espacio entre contenedor de checkboxes y botÃ³n Edit -->
                        <a id="editButton" class="btn btn-success" href="#" disabled style="background-color: {{ user.company.theme_set.all.0.button_color }}; border-color: {{ user.company.theme_set.all.0.button_color }};">
                            <i class="fa-solid fa-pencil"></i>
                        </a>
                    </div>
                    {% endif %}
                    {% if messages %}
                    <div class="alert-container">
                        {% for message in messages %}
                            <div class="alert {{ message.tags }}">{% trans "Configuration updated successfully for " %} {{ message }}</div>
                        {% endfor %}
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    var translations = {
        confirmMessage: "{% trans 'Please select a company.' %}",
    };

</script>

<script src="{% static 'assets/js/configuration_report/add_items_by_company.js' %}"></script>

<style>
    #search-company {
        border: 1.5px solid lightgray; /* Borde inicial en gris claro */
        padding: 5px; /* Espaciado interno */
        width: 200px; /* Ancho especificado */
    }

    #search-company:focus {
        border-color: {{ user.company.theme_set.all.0.button_color }};
    }
</style>

{% endblock %}
