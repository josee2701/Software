{% extends "layouts/base.html" %}
{% load i18n static %}
{% load staticfiles %}
{% load crispy_forms_tags %}

{% block content %}
  <div class="container">
    <div class="card">
      <div class="table-responsive">
        <h2 class="font-weight-normal mt-3 text-center">
          <a href="javascript:;">{% trans "Theme" %}</a>
        </h2>

        {% if form.errors %}
          <p>{% trans "Revise los espacios en rojo" %} {{ form.errors }}</p>
        {% endif %}

        <div class="card-body">
          <div class="p-4">
            <form method="POST" enctype="multipart/form-data">
              {% csrf_token %}
              {{ form.media }}

              <div class="form-group row">
                {% for field in form %}
                    {% if field.html_name == "button_color" %}
                        <div class="col-md-2">
                            <div class="input-group input-group-static mb-0">
                              {% trans "Button color: " %}
                                {{ field }}
                            </div>
                        </div>
                    {% endif %}
                {% endfor %}

                <div class="col-md-2">
                    <div class="input-group input-group-static mb-4">
                        {% trans "Sidebar Color:" %}
                        {{ form.sidebar_color }}
                        <input type="range" min="20" max="255" step="1" class="slider" name="opacity" value="{{ form.opacity.value }}" id="id_opacity">
                    </div>
                </div>

                <div class="col-md-2">
                    <div style="inline-size: 150px; block-size: 83px; margin-block-start: 30px; background-color:{{ form.sidebar_color.value }}{{ form.opacity.value }};"
                        data-id="background-color" id="color_picker_sidebar" name="sidebar_color" class="form-control"></div>
                </div>
            </div>

            <div class="form-group row">
                {% for field in form %}
                    {% if field.html_name == "sidebar_position" %}
                        <div class="col-md-2">
                            <div class="input-group input-group-static mb-4">
                                <label for="{{ field.id_for_label }}">{{ field.label_tag|capfirst }}</label>
                                {{ field }}
                            </div>
                        </div>
                    {% endif %}
                {% endfor %}
            </div>
              <div class="form-group row">
                {% for field in form %}
                  {% if field.html_name == "sidebar_image" or field.html_name == "lock_screen_image" %}
                    <div class="col-md-4">
                      <div class="input-group input-group-static my-3">
                        <div class="card">
                          <div class="p-4">
                            <label for="{{ field.id_for_label }}">{{ field.label_tag|capfirst }}</label>
                            <br>
                            {% if field.value %}
                              <img label="{{ field.id_for_label }}" src="{{ field.value.url }}" width="75%" height="auto">
                            {% endif %}
                            <br>
                            {{ field }}
                            {{ field.errors }}
                          </div>
                        </div>
                      </div>
                    </div>
                  {% endif %}
                {% endfor %}
              </div>

              <input type="submit" value="{% trans 'Save' %}" class="btn btn-success" />
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
{% endblock %}
